<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Corblivar: Corblivar</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Corblivar
   </div>
   <div id="projectbrief">Corblivar is a simulated-annealing-based floorplanning suite for 3D ICs</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('index.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Corblivar </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Corblivar is a simulated-annealing-based floorplanning suite for 3D ICs, with special emphasis on (a) structural planning of large-scale interconnects and (b) timing-driven voltage assignment.</p>
<h2>Licence</h2>
<p>Copyright (C) 2013-2016 Johann Knechtel, johann aett jknechtel dot de</p>
<p><a href="https://github.com/jknechtel/Corblivar">https://github.com/jknechtel/Corblivar</a></p>
<p>This file is part of Corblivar.</p>
<p>Corblivar is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.</p>
<p>Corblivar is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</p>
<p>You should have received a copy of the GNU General Public License along with Corblivar. If not, see <a href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a>.</p>
<h2>Citation</h2>
<p>If you find this tool useful, and apply it for your research and publications, please cite our papers:</p><ul>
<li>J. Knechtel, E. F. Y. Young, J. Lienig, "Planning Massive Interconnects in 3D Chips", in IEEE Transactions on Computer-Aided Design of Integrated Circuits and Systems, 34(11):1808-1821, 2015, DOI: <a href="http://dx.doi.org/10.1109/TCAD.2015.2432141">http://dx.doi.org/10.1109/TCAD.2015.2432141</a></li>
<li>J. Knechtel, E. F. Y. Young, J. Lienig, "Structural Planning of 3D-IC Interconnects by Block Alignment", in Proc. Asia South Pacific Design Automation Conference, pp. 53-60, 2014, DOI: <a href="http://dx.doi.org/10.1109/ASPDAC.2014.6742866">http://dx.doi.org/10.1109/ASPDAC.2014.6742866</a></li>
</ul>
<h2>Compile &amp; Run</h2>
<p><b>To compile and run Corblivar, you need the following</b></p><ul>
<li>C++ compiler (clang++ was used; for clang++ at least version 3.1 is required)</li>
<li>libboost-dev</li>
<li>gnuplot</li>
<li>octave</li>
<li>perl</li>
<li>cairosvg</li>
<li>a modified copy of the BU's HotSpot 3D-IC thermal analyzer; the code should be provided along with Corblivar or can be retrieved from <a href="https://github.com/jknechtel/HotSpot">https://github.com/jknechtel/HotSpot</a>. Note that this code has to be compiled separately.</li>
</ul>
<h2>Usage</h2>
<p><b>To use Corblivar, the following procedure should be followed</b></p>
<h3>1) Configuration of HotSpot</h3>
<p><b>see ../HotSpot/hotspot.config</b></p>
<p>Relevant are the specs for the heat sink and heat spreader; they should be adapted to reflect largest chip dimensions under consideration.</p>
<p>Also note that the helper script exp/HotSpot.sh relies on HotSpot being in ~/code/HotSpot; if your local setup differs, adapt the script accordingly.</p>
<h3>2) Configuration of Corblivar</h3>
<p><b>see exp/Corblivar.conf and exp/Technology.conf, or other examples in exp/configs/</b></p>
<p>Technology parameters like die dimensions and TSV sizes are configured in exp/Technology.conf</p>
<p>In exp/Corblivar.conf, the section "SA -- Layout generation options" can be used to configure the optimization heuristic. Reasonable values depend on the experiments under consideration.</p>
<p>The sections "SA -- Loop parameters" and "SA -- Temperature schedule parameters" control the runtime behaviour of the optimization. These values can impact the success rate, especially for ``complex'' experiments with many block-alignment requests and/or dense packing. The latter section, however, is considered to be applicable for different experiments&mdash;the adaptive SA-optimization schedule draws the cooling parameters somewhat robust since local minima in the solution space can be escaped easily by iterative temperature increases (cooling phase 3).</p>
<p>The section "SA -- Factors for second-phase cost function" controls the various optimization modules; the related values should be adapted to reflect the desired cost function. Note that zero values deactivate the respective optimization completely and thus allows to save runtime.</p>
<p>The section "Power blurring (thermal analysis) -- Default thermal-mask parameters" can be left as is; the related parametrization is done via separate scripts, as described in the next step.</p>
<h3>3) Parametrization of Power-Blurring Thermal Analysis</h3>
<p><b>see thermal_analysis_octave/ and doc/therma_analysis_octave.pdf</b></p>
<p>As indicated in 2), the thermal-mask parameters are determined separately. The related Octave scripts should be run whenever the 3D-IC setup changes notably, i.e., when the number of layers, the outline, the heatsink, and/or the (magnitude of) power consumption of the benchmarks changes.</p>
<p>To configure the Octave scripts, see thermal_analysis_octave/parameters.m Note that given default parameters should be applicable for most GSRC-benchmarks-based experiments.</p>
<p>To run the Octave scripts, either change directory to thermal_analysis_octave/ and start scripts from there (octave optimization.m BENCH CORBLIVAR.CONF), or copy the scripts from thermal_analysis_octave/ to separate working directories; see below and/or exp/run9.sh for further details.</p>
<p>It's important to note that parallel runs of different of the Octave scripts have to be avoided; they will result in runtime errors and undermine parametrization!</p>
<p>The Octave scripts work roughly like this: first, generate an initial floorplan solution, used as a baseline reference; second, run HotSpot on this solution (note that specific values for heterogeneous TSV densities are already considered here); third, match the power-blurring temperature map to the HotSpot map via a local search; fourth, output the related power-blurring parameters for the best match, which describes the HotSpot estimate most closely. For further details, see documentation_Octave.pdf.</p>
<p>Note that Corblivar models the thermal impact of both regular signal TSVs and vertical buses, i.e., large TSV groups. Regular signal TSVs may be clustered into vertical buses as well, when the layout-generation option "Clustering of signal TSVs" is activated. Vertical buses are assumed to have tightest possible packing of multiple TSVs (100% TSV density) for the whole bus region, even if fewer TSVs would suffice for signal transmission.</p>
<h3>4) Running Corblivar</h3>
<p><b>see exp/run*.sh or directly start ./Corblivar</b></p>
<p>To run Corblivar, one can start the binary directly, for example from the exp/ folder as </p><pre class="fragment">../Corblivar BENCH CORBLIVAR.CONF benches/
</pre><p>The other option is to call Corblivar in a batch mode, as outlined in the scripts exp/run*.sh</p>
<p>Note that for generation of plotted data, one has to call the script exp/gp.sh afterwards in the related working directory.</p>
<h1>Comments</h1>
<p><b>The further comments elaborate on the folders and scripts of Corblivar</b></p>
<p>Various experiments can be started using exp/run*.sh; these scripts are not a complete set for running all experiments but rather a guideline for different setups.</p>
<p>The folder exp/benches/ includes MCNC (some are not working, i.e., have issues with their content), GSRC, and IBM-HB+ benchmarks, all in the GSRC format</p>
<p>The folder thermal_analysis_octave/ includes Octave scripts for the parameterization of the power-blurring-based thermal analysis; they can be also included e.g. in run*.sh scripts. Note that these scripts will produce temporary output data in thermal_analysis_octave/, i.e., you might want to copy thermal_analysis_octave/ into separate working directories for parallel execution of different experiments, to avoid mixed up data. See for example exp/run9.sh</p>
<p>The script exp/gp.sh delegates to gnuplot for generating various output plots, e.g., thermal map and floorplan, after running Corbilvar.</p>
<p>The script exp/HotSpot.sh calls a (slightly modified) version of BU's 3D HotSpot program; the related code should be provided along with Corblivar. Note that the script contains a path to the HotSpot binary which has to be adapted for your local setup.</p>
<p>The script exp/extract_numeric_results.sh and the spreadsheet exp/evaluate_via_charts.ods can be used to evaluate experimental batches, generated via some run script in exp/run*.sh</p>
<p>The file exp/Corblivar.conf is a template for the config file required by Corblivar, further examples can be found in exp/configs/.</p>
<h1>Changelog</h1>
<h2>1.4.3</h2>
<p>TODO</p>
<h2>1.4.2</h2>
<p><em>November 2015, commit 8d104fee63fc1b1a340d317a2193381435f03b5b</em> <b>updates and fixes for layout operations / floorplanner and voltage assignment; further general updates/fixes</b></p><ul>
<li>benchmarks: GSRC benchmarks now also available with soft blocks, e.g., n100_soft; added power densities for (randomly) selected IBM-HB+ benchmarks</li>
<li>layout operations / floorplanner: fix thermal-aware block moving, to avoid excessive deadspace; consider blocks with largest net preferably for minimizing timing and WL; consider blocks which exceed outline preferably to improve chances for fixed-outline-fitting solutions; fix area-outline cost; shrink die outlines whenever possible, which improves deadspace and runtime</li>
<li>voltage assignment: reduce timing threshold/constraint whenever a better solution is found; this way, notable runtime can be saved since voltage assignment is only conducted in case timing is not violated; quality is also improved this way; also, ignore compound modules spreading more than two dies, to limit solution space</li>
<li>power evaluation: dynamic power consumption of interconnects, i.e., TSVs and wires, is captured now as well</li>
<li>HotSpot thermal data is now prepared such that it will be plotted directly from HotSpot data using gnuplot, not via (buggy) perl script from HotSpot</li>
<li>clustering: size of thermal hotspots not considered anymore; this was misleading in case very small but very hot hotspots are found along with very large but very ``cool'' hotspots</li>
<li>updates/fixes greedy shifting of TSV islands</li>
<li>fix read-in of Corblivar solutions; dimensions of soft blocks were previously ignored</li>
<li>div updates/fixes for improving performance and refactoring classes</li>
<li>updates config scripts and helper scripts</li>
</ul>
<h2>1.4.1</h2>
<p><em>August 2015, commit 6273e1c66705c905f72ab2409045a4677ad7d05a</em> <b>major updates and fixes for voltage assignment, mainly related to memory/runtime efforts</b></p><ul>
<li>voltage assignment: consider only one best-cost candidate, notably reduces memory consumption but maintains proper solution-space exploration</li>
<li>voltage assignment: perform only for solutions without delay violations, reduces runtime notably</li>
<li>voltage assignment: drop non-essential copy operations</li>
<li>introduce numerical block id, along the previous string id; notably reduces computational efforts for voltage assignment</li>
<li>iterative updates of power saving and corners for compound modules; improves computational effort for voltage assignment notably</li>
<li>updates cost handling for floorplanner</li>
<li>fix memory leakage related to TSV islands</li>
<li>updates technology and Corblviar config files for different experiments</li>
<li>div refactoring and cleanups</li>
</ul>
<h2>1.4.0</h2>
<p><em>July 2015, commit 3cecd66182758b190dac0481fc3ed30f35270dad</em> <b>new feature: delay-aware voltage assignment, minor other updates and fixes</b></p><ul>
<li>added determination of delays, using Elmore delay for net and TSV delay, and module delays based on voltage assignment</li>
<li>added voltage-assignment handler: determines possible arrangements of voltage domains and selects the best-cost solutions</li>
<li>added related contiguity analysis for modules/blocks</li>
<li>related update floorplanning flow</li>
<li>related update Technology.conf and Corblivar.conf; added new experiments and config scripts</li>
<li>fix memory leakage related to greedy shifting of TSV islands</li>
<li>div refactoring and cleanups</li>
</ul>
<h2>1.3.1</h2>
<p><em>May 2015, commit f770ba1d2e56f9df6f3f0dab0d9e2b020e111928</em> <b>minor updates and fixes</b></p><ul>
<li>fixes related to handling alignment with <a class="el" href="class_r_b_o_d.html" title="derived dummy block &quot;RBOD&quot; as ``Reference Block On Die&#39;&#39; for fixed offsets ">RBOD</a>, i.e., alignments for pre-fixed blocks</li>
<li>updates for TSV handling; put single TSVs (in net's bounding boxes' center) in case clustering is not applied</li>
</ul>
<h2>1.3.0</h2>
<p><em>May 2015, commit 10098b4fe61b8f23e8d777c1039ef75b9523e024</em> <b>considerable updates and fixes (interconnects handling, clustering, layout operations, HotSpot data, etc), new feature: routing-congestion estimation</b></p><ul>
<li>added estimation of routing congestion; considering all wires, also connecting to TSVs</li>
<li>various fixes regarding clustering and related interconnects handling</li>
<li>improved accuracy for determination of interconnects; for TSVs, regular wires and massive buses</li>
<li>improved layout packing; added dedicated handling for outer blocks</li>
<li>improved handling TSV islands, greedy shifting to avoid overlaps</li>
<li>various fixes regarding griding of HotSpot input-data; HotSpot errors due to conversion errors are now settled</li>
<li>updates and fixes handling of strictly aligned massive interconnects</li>
<li>updates and fixes for handling for intermediately failed alignments</li>
<li>updates and fixes layout operations</li>
<li>various updates and cleanups for logging</li>
<li>various updates and cleanups for benchmarks and experimental setups</li>
</ul>
<h2>1.2.0</h2>
<p><em>October 13, 2014, commit 3f770ef4302729f6aa253ecdb65d2ffbb6c2ffbb</em> <b>major updates (alignment encoding and handling, consideration of interconnects' HPWL), new features (clustering of signal TSVs and related hotspot determination), and various fixes and cleanups</b></p><ul>
<li>added handling for TSV blocks</li>
<li>added feature; clustering of signal TSVs into vertical buses, related features like blob-detection-based hotspot determination and handling of vertical buses during thermal analysis</li>
<li>update alignment encoding; added global type (strict, flexible) and signals count</li>
<li>update alignment handling; added dedicated swap operations for failed alignments</li>
<li>update massive-interconnects handling; consider interconnects' weighted HPWL during optimization (for fair comparison and better final results)</li>
<li>updates folder structure</li>
<li>added Technology.conf; separate file for technology parameters</li>
<li>updates and cleanups classes, code structure, and namespace</li>
<li>updates experimental setups and configs</li>
<li>updates and fixes octave scripts for thermal analysis</li>
<li>updates and fixes HotSpot file generation</li>
<li>various further fixes and updates</li>
</ul>
<h2>1.1.1</h2>
<p><em>May 7, 2014, commit bacb85a62a4b779cb94286ee3a1e946c19e234a1</em> <b>updates, consideration of heterogeneous TSV densities</b></p><ul>
<li>dropped deprecated handling of different masks</li>
<li>dropped dummy TSV handling</li>
<li>added handler for TSV densities considering both signal TSVs and vertical buses</li>
<li>Octave script now considers parameter for scaling down power in TSV regions</li>
<li>various minor updates and fixes</li>
</ul>
<h2>1.1.0</h2>
<p><em>Nov 13, 2013, commit 1de2426d361595bbec4542e425c8eb74fecaf544</em> <b>new feature, consideration of heterogeneous TSV densities</b></p><ul>
<li>adapted power blurring for using different masks</li>
<li>added plotting of TSV-density maps</li>
<li>adapted HotSpot file handler</li>
<li>added dummy TSV handler</li>
<li>Octave script now considers determination of different masks</li>
<li>various minor updates and fixes</li>
</ul>
<h2>1.0.4</h2>
<p><em>Aug 21, 2013, commit 44f573ed8f31654e6c07d6cc391cf528233f30bf</em> <b>fixes and updates, thermal analysis</b></p>
<h2>1.0.3</h2>
<p><em>Aug 1, 2013, commit 157d3c989ac20799d0e4efce8acf6b244a68a480</em> <b>fix, compiling error for 64-bit libaries</b></p>
<h2>1.0.2</h2>
<p><em>Jul 29, 2013, commit 80029340de6e0d9fc97c705828671cbc4a26057c</em> <b>update, enable fixed-position block alignment</b></p>
<h2>1.0.1</h2>
<p><em>Jul 29, 2013, commit f583c3b77b4c67a7b11aacc117f0d436b5408d84</em> <b>bugfixes and updates</b></p><ul>
<li>update HotSpot BU to v 1.2</li>
<li>fixes calculation of thermal-related material properties</li>
<li>new class Chip contains all chip-related settings</li>
</ul>
<h2>1.0.0</h2>
<p><em>Jul 22, 2013, commit 286b7917b05be13d3cbcdb4b837422baa00888ad</em> <b>initial public release</b> </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
